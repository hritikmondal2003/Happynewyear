<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎉 Happy New Year 🎉</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .highlight {
            color: gold;
            font-weight: bold;
            animation: pop 0.6s ease-in-out;
        }
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.5) rotate(10deg); }
            100% { transform: scale(1); }
        }
        .firework-burst {
            animation: burst 1s ease forwards;
        }
        @keyframes burst {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="feliz">🎉 Happy New Year 🎉</div>
    
    <div class="ano_novo">
        <span id="year-1"></span>
        <span id="year-2"></span>
        <span id="year-3"></span>
        <span id="old-last"></span>
        <span id="new-last" style="position:absolute; right:0; opacity:0;"></span>
        <div class="balao"></div>
    </div>
    
    <div class="fogos">
        <div class="f1"><span><i></i></span><span><i></i></span><span><i></i></span></div>
        <div class="f2"><span><i></i></span><span><i></i></span><span><i></i></span></div>
        <div class="f3"><span><i></i></span><span><i></i></span><span><i></i></span></div>
        <div class="f4"><span><i></i></span><span><i></i></span><span><i></i></span></div>
    </div>

    <footer class="n">
        <h3>Made with ❤️ by Hritik Mondal</h3>
    </footer>

    <script>
        function setYearDigits(year, oldYear = false) {
            const y = year.toString();
            document.getElementById('year-1').textContent = y[0];
            document.getElementById('year-2').textContent = y[1];
            document.getElementById('year-3').textContent = y[2];
            if (oldYear) {
                document.getElementById('old-last').textContent = y[3];
            } else {
                document.getElementById('new-last').textContent = y[3];
            }
        }

        function triggerFireworks() {
            document.querySelectorAll('.fogos div').forEach(f => {
                f.classList.add('firework-burst');
                setTimeout(() => f.classList.remove('firework-burst'), 1500);
            });
        }

        function changeYearAnimation(newYear) {
            const newLast = document.getElementById('new-last');
            const oldLast = document.getElementById('old-last');

            // Animate old digit up
            oldLast.style.transition = "transform 1s ease, opacity 1s ease";
            oldLast.style.transform = "translateY(-100px)";
            oldLast.style.opacity = "0";

            // Animate new digit in
            setTimeout(() => {
                setYearDigits(newYear);
                newLast.style.opacity = "1";
                newLast.classList.add('highlight');
                triggerFireworks();
                setTimeout(() => newLast.classList.remove('highlight'), 2000);
            }, 1000);
        }

        // Initial setup: show old year fully
        const now = new Date();
        let currentYear = now.getFullYear();
        let previousYear = currentYear - 1;
        setYearDigits(previousYear, true);
        document.getElementById('new-last').textContent = String(currentYear).slice(-1);

        // Auto trigger at midnight
        setInterval(() => {
            const t = new Date();
            if (t.getFullYear() > currentYear) {
                currentYear = t.getFullYear();
                changeYearAnimation(currentYear);
            }
        }, 1000);
    </script>
</body>
</html>
