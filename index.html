<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üéâ Happy New Year üéâ</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Pacifico&display=swap" rel="stylesheet">
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="src/assets/boy.svg"/>

  <style>
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      background:linear-gradient(135deg,#071a22,#0f2b36,#153c48);
      color:#fff;
      overflow:hidden;
      font-family:'Montserrat',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    }

    /* Heading */
    .feliz{
      margin:0 16px 24px;
      text-align:center;
      font-family:'Pacifico',cursive;
      font-size:clamp(36px,6vw,72px);
      line-height:1.05;
      letter-spacing:0.5px;
      color:#00e5ff;
      text-shadow:0 3px 14px rgba(0,0,0,.35);
      white-space:nowrap;
    }

    /* Stage */
    .stage{
      position:relative;
      width:min(780px,92vw);
      height:clamp(120px,18vw,200px);
      overflow:hidden;
      display:grid;
      place-items:center;
    }

    .yearLayer{
      position:absolute; inset:0;
      display:grid; place-items:center;
      font-weight:800;
      font-size:clamp(72px,18vw,160px);
      letter-spacing:4px;

      /* Gradient text fix */
      background:linear-gradient(90deg,#ff8a00,#ffb300);
      background-size:200% auto;
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      -webkit-text-fill-color:transparent;

      text-shadow:0 6px 22px rgba(0,0,0,.35);
      opacity:0;
      will-change:transform,opacity;
    }
    .yearLayer.visible{opacity:1}

    /* Animations */
    .slide-out-left{ animation:slideOutLeft 3s ease forwards }
    .slide-in-right{ animation:slideInRight 3s ease forwards }
    .pop{ animation:pop 0.5s ease-in-out forwards }

    @keyframes slideOutLeft{
      0%{ transform:translateX(0); opacity:1 }
      100%{ transform:translateX(-260px); opacity:0 }
    }
    @keyframes slideInRight{
      0%{ transform:translateX(260px); opacity:0 }
      100%{ transform:translateX(0); opacity:1 }
    }
    @keyframes pop{
      0%{ transform:scale(1) }
      50%{ transform:scale(1.06) }
      100%{ transform:scale(1) }
    }

    footer.n{
      position:absolute;left:0;right:0;bottom:0;
      text-align:center;padding:14px 10px;
      background:rgba(0,0,0,.35);
      font-size:14px
    }

    @media (prefers-reduced-motion:reduce){
      .slide-out-left,.slide-in-right,.pop{animation-duration:.001s !important}
    }
  </style>
</head>
<body>
  <h1 class="feliz">üéâ Happy New Year üéâ</h1>

  <div class="stage">
    <div id="layerA" class="yearLayer visible"></div>
    <div id="layerB" class="yearLayer"></div>
  </div>

  <footer class="n">
    <h3>Made with ‚ù§Ô∏è by Hritik Mondal</h3>
  </footer>

  <script>
    // Random gradient colors every load
    function getRandomGradient() {
      const colors = [
        ['#ff512f', '#dd2476'],
        ['#24c6dc', '#514a9d'],
        ['#ff8a00', '#e52e71'],
        ['#00c6ff', '#0072ff'],
        ['#f7971e', '#ffd200'],
        ['#8e2de2', '#4a00e0'],
        ['#ff5f6d', '#ffc371'],
        ['#36d1dc', '#5b86e5']
      ];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    function applyRandomGradient(el) {
      const [c1, c2] = getRandomGradient();
      el.style.background = `linear-gradient(90deg, ${c1}, ${c2})`;
      el.style.backgroundSize = '200% auto';
    }

    // Elements
    const a = document.getElementById('layerA');
    const b = document.getElementById('layerB');

    // State
    let shownYear = new Date().getFullYear();
    let current = a;
    let next = b;
    let animating = false;

    const setText = (el, y) => {
      el.textContent = String(y);
      applyRandomGradient(el);
    };

    const raf = (fn) => requestAnimationFrame(() => requestAnimationFrame(fn));

    function finalizeSwap(newYear){
      current.className = 'yearLayer';
      next.className = 'yearLayer visible';
      setText(current, newYear);
      [current, next] = [next, current];
      shownYear = newYear;
      animating = false;
    }

    function animateTo(newYear){
      if(animating) return;
      animating = true;

      setText(next, newYear);
      next.className = 'yearLayer visible';

      raf(() => {
        current.classList.add('slide-out-left');
        next.classList.add('slide-in-right');

        const onInEnd = (e)=>{
          if(e.animationName !== 'slideInRight') return;
          next.classList.remove('slide-in-right');
          next.classList.add('pop');
          setTimeout(()=>{ next.classList.remove('pop'); finalizeSwap(newYear); }, 180);
          next.removeEventListener('animationend', onInEnd);
        };
        const onOutEnd = (e)=>{
          if(e.animationName !== 'slideOutLeft') return;
          current.classList.remove('slide-out-left');
          current.removeEventListener('animationend', onOutEnd);
        };
        next.addEventListener('animationend', onInEnd);
        current.addEventListener('animationend', onOutEnd);
      });
    }

    // Init
    const realYear = new Date().getFullYear();
    setText(current, realYear - 1);
    setText(next, realYear - 1);

    setTimeout(()=> animateTo(realYear), 600);

    setInterval(()=>{
      const y = new Date().getFullYear();
      if(y !== shownYear && !animating){
        animateTo(y);
      }
    }, 1000);

    window.demoFlip = (y)=> animateTo(Number(y)||shownYear+1);
  </script>
</body>
</html>
